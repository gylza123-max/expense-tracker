<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edukasi Kesehatan Gigi</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75'>ü¶∑</text></svg>">
<link href="https://fonts...
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #E0F7FA 0%, #B2EBF2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        /* Bubble Animation Background */
        .bubble {
            position: fixed;
            bottom: -100px;
            left: var(--x);
            width: 20px;
            height: 20px;
            background: rgba(0, 188, 212, 0.1);
            border-radius: 50%;
            opacity: 0.6;
            pointer-events: none;
            animation: float 8s infinite;
        }

        @keyframes float {
            0% { transform: translateY(0) translateX(0); opacity: 0.6; }
            100% { transform: translateY(-100vh) translateX(20px); opacity: 0; }
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0, 188, 212, 0.2);
            max-width: 600px;
            width: 100%;
            z-index: 10;
            text-align: center;
        }

        header {
            margin-bottom: 40px;
        }

        .logo {
            font-size: 60px;
            margin-bottom: 15px;
        }

        h1 {
            font-family: 'Poppins', sans-serif;
            color: #00695C;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #00BCD4;
            font-size: 1em;
            font-weight: 600;
        }

        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        button {
            padding: 25px 20px;
            border: none;
            border-radius: 15px;
            font-family: 'Poppins', sans-serif;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            box-shadow: 0 5px 20px rgba(0, 188, 212, 0.3);
        }

        .btn-sikat {
            background: linear-gradient(135deg, #00BCD4 0%, #0097A7 100%);
        }

        .btn-sikat:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 188, 212, 0.5);
        }

        .btn-floss {
            background: linear-gradient(135deg, #26C6DA 0%, #00ACC1 100%);
        }

        .btn-floss:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(38, 198, 218, 0.5);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 700px;
            width: 100%;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #FFE0B2;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .close-btn:hover {
            background: #FFCC80;
            transform: rotate(90deg);
        }

        .modal h2 {
            font-family: 'Poppins', sans-serif;
            color: #00695C;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        /* Animation Canvas */
        .animation-container {
            background: #F1F8E9;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            min-height: 250px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        canvas {
            max-width: 100%;
            height: auto;
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #E0E0E0;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00BCD4 0%, #00ACC1 100%);
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        /* Step Info */
        .step-info {
            background: #E0F7FA;
            border-left: 4px solid #00BCD4;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: left;
        }

        .step-number {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            color: #00695C;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .step-text {
            color: #333;
            line-height: 1.6;
        }

        /* Navigation */
        .nav-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 30px;
        }

        .nav-btn {
            padding: 12px 20px;
            border: 2px solid #00BCD4;
            background: white;
            color: #00BCD4;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nav-btn:hover:not(:disabled) {
            background: #00BCD4;
            color: white;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-btn.primary {
            background: #00BCD4;
            color: white;
            border-color: #00BCD4;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 1.5em;
            }

            .button-group {
                grid-template-columns: 1fr;
            }

            .modal-content {
                padding: 20px;
            }

            .logo {
                font-size: 40px;
            }
        }
    </style>
</head>
<body>
    <!-- Bubble Background -->
    <div id="bubbles"></div>

    <!-- Main Container -->
    <div class="container">
        <header>
            <div class="logo">ü¶∑</div>
            <h1>Gigi Sehat</h1>
            <p class="subtitle">Panduan Bersihkan Gigi yang Benar</p>
        </header>

        <p style="color: #666; margin: 20px 0; line-height: 1.6;">
            Belajar cara sikat gigi dan flossing yang optimal untuk kesehatan gigi dan gusi yang lebih baik.
        </p>

        <div class="button-group">
            <button class="btn-sikat" onclick="openModal('sikat')">
                <div style="font-size: 2em; margin-bottom: 10px;">ü™•</div>
                Cara Sikat Gigi
            </button>
            <button class="btn-floss" onclick="openModal('floss')">
                <div style="font-size: 2em; margin-bottom: 10px;">‚ú®</div>
                Cara Flossing
            </button>
        </div>
    </div>

    <!-- Modal Sikat Gigi -->
    <div class="modal" id="modalSikat">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('sikat')">&times;</button>
            <h2>ü™• Cara Sikat Gigi yang Benar</h2>

            <div class="progress-bar">
                <div class="progress-fill" id="progressSikat" style="width: 0%;"></div>
            </div>

            <div class="animation-container">
                <canvas id="canvasSikat" width="400" height="250"></canvas>
            </div>

            <div class="step-info">
                <div class="step-number" id="stepNumberSikat">Langkah 1</div>
                <div class="step-text" id="stepTextSikat">Basahi sikat dan oleskan pasta gigi seukuran kacang polong</div>
            </div>

            <div style="background: #FFF9C4; padding: 15px; border-radius: 8px; margin: 20px 0; color: #F57F17;">
                ‚è±Ô∏è Timer: <span id="timerSikat">2:00</span> untuk seluruh prosesnya
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevStepSikat()" id="prevBtnSikat" disabled>‚Üê Sebelumnya</button>
                <button class="nav-btn primary" onclick="resetSikat()">üîÑ Ulangi</button>
                <button class="nav-btn" onclick="nextStepSikat()" id="nextBtnSikat">Selanjutnya ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- Modal Flossing -->
    <div class="modal" id="modalFloss">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('floss')">&times;</button>
            <h2>‚ú® Cara Flossing yang Benar</h2>

            <div class="progress-bar">
                <div class="progress-fill" id="progressFloss" style="width: 0%;"></div>
            </div>

            <div class="animation-container">
                <canvas id="canvasFloss" width="400" height="250"></canvas>
            </div>

            <div class="step-info">
                <div class="step-number" id="stepNumberFloss">Langkah 1</div>
                <div class="step-text" id="stepTextFloss">Ambil benang gigi ¬±45cm, lilitkan di jari tengah kedua tangan</div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevStepFloss()" id="prevBtnFloss" disabled>‚Üê Sebelumnya</button>
                <button class="nav-btn primary" onclick="resetFloss()">üîÑ Ulangi</button>
                <button class="nav-btn" onclick="nextStepFloss()" id="nextBtnFloss">Selanjutnya ‚Üí</button>
            </div>
        </div>
    </div>

    <script>
        // Data Langkah Sikat Gigi
        const sikatSteps = [
            "Basahi sikat dan oleskan pasta gigi seukuran kacang polong",
            "Miringkan sikat 45¬∞ ke arah gusi",
            "Gosok dengan gerakan memutar kecil (2x30 detik per bagian)",
            "Bersihkan bagian dalam gigi depan dengan gerakan atas-bawah",
            "Gosok permukaan kunyah gigi geraham",
            "Sikat lidah dari belakang ke depan",
            "Kumur dan bilas mulut"
        ];

        // Data Langkah Flossing
        const flossSteps = [
            "Ambil benang gigi ¬±45cm, lilitkan di jari tengah kedua tangan",
            "Pegang benang sepanjang 2-3cm dengan jempol dan telunjuk",
            "Selipkan benang perlahan di antara gigi ‚Äî jangan dipaksa",
            "Lengkungkan benang membentuk huruf C di sekitar gigi",
            "Gerakkan benang naik-turun dengan lembut 8-10 kali",
            "Ulangi untuk setiap celah gigi dengan bagian benang yang bersih"
        ];

        let currentSikatStep = 0;
        let currentFlossStep = 0;
        let sikatTimer = 120; // 2 menit
        let sikatAnimationId = null;

        // Modal Functions
        function openModal(type) {
            if (type === 'sikat') {
                document.getElementById('modalSikat').classList.add('active');
                startSikatAnimation();
                startSikatTimer();
            } else {
                document.getElementById('modalFloss').classList.add('active');
                startFlossAnimation();
            }
        }

        function closeModal(type) {
            if (type === 'sikat') {
                document.getElementById('modalSikat').classList.remove('active');
                if (sikatAnimationId) cancelAnimationFrame(sikatAnimationId);
            } else {
                document.getElementById('modalFloss').classList.remove('active');
            }
        }

        // Sikat Gigi Functions
        function updateSikatStep() {
            const step = currentSikatStep + 1;
            document.getElementById('stepNumberSikat').textContent = `Langkah ${step}`;
            document.getElementById('stepTextSikat').textContent = sikatSteps[currentSikatStep];
            document.getElementById('progressSikat').style.width = ((step / sikatSteps.length) * 100) + '%';
            document.getElementById('prevBtnSikat').disabled = currentSikatStep === 0;
            document.getElementById('nextBtnSikat').disabled = currentSikatStep === sikatSteps.length - 1;
        }

        function nextStepSikat() {
            if (currentSikatStep < sikatSteps.length - 1) {
                currentSikatStep++;
                updateSikatStep();
            }
        }

        function prevStepSikat() {
            if (currentSikatStep > 0) {
                currentSikatStep--;
                updateSikatStep();
            }
        }

        function resetSikat() {
            currentSikatStep = 0;
            sikatTimer = 120;
            updateSikatStep();
        }

        function startSikatTimer() {
            setInterval(() => {
                if (sikatTimer > 0) {
                    sikatTimer--;
                    const min = Math.floor(sikatTimer / 60);
                    const sec = sikatTimer % 60;
                    document.getElementById('timerSikat').textContent = min + ':' + (sec < 10 ? '0' : '') + sec;
                }
            }, 1000);
        }

        // Floss Functions
        function updateFlossStep() {
            const step = currentFlossStep + 1;
            document.getElementById('stepNumberFloss').textContent = `Langkah ${step}`;
            document.getElementById('stepTextFloss').textContent = flossSteps[currentFlossStep];
            document.getElementById('progressFloss').style.width = ((step / flossSteps.length) * 100) + '%';
            document.getElementById('prevBtnFloss').disabled = currentFlossStep === 0;
            document.getElementById('nextBtnFloss').disabled = currentFlossStep === flossSteps.length - 1;
        }

        function nextStepFloss() {
            if (currentFlossStep < flossSteps.length - 1) {
                currentFlossStep++;
                updateFlossStep();
            }
        }

        function prevStepFloss() {
            if (currentFlossStep > 0) {
                currentFlossStep--;
                updateFlossStep();
            }
        }

        function resetFloss() {
            currentFlossStep = 0;
            updateFlossStep();
        }

        // Animation Functions - 3D Version
        function startSikatAnimation() {
            const canvas = document.getElementById('canvasSikat');
            const ctx = canvas.getContext('2d');
            let animationProgress = 0;
            let particles = [];

            function createParticle(x, y) {
                particles.push({
                    x: x,
                    y: y,
                    z: Math.random() * 30 - 15,
                    vx: (Math.random() - 0.5) * 2,
                    vy: Math.random() * -3 - 1,
                    vz: (Math.random() - 0.5) * 0.5,
                    life: 1,
                    size: Math.random() * 2 + 1
                });
            }

            function project3D(x, y, z) {
                const perspective = 250;
                const scale = perspective / (perspective + z);
                return {
                    x: x * scale,
                    y: y * scale,
                    scale: scale
                };
            }

            function draw3DTeeth(x, y) {
                ctx.shadowColor = 'rgba(0,0,0,0.2)';
                ctx.shadowBlur = 6;

                // Draw 8 incisor teeth yang besar dan jelas
                for (let i = 0; i < 8; i++) {
                    const startX = x + (i * 24);
                    const startY = y;
                    
                    // Main tooth body
                    const toothWidth = 16;
                    const toothHeight = 32;

                    // Tooth outline - anatomically correct
                    ctx.beginPath();
                    // Top edge (incisal edge)
                    ctx.moveTo(startX + 2, startY);
                    ctx.lineTo(startX + toothWidth - 2, startY);
                    // Right cervical line (junction with gum)
                    ctx.quadraticCurveTo(startX + toothWidth, startY + toothHeight * 0.65, startX + toothWidth - 1, startY + toothHeight);
                    // Bottom root (pointed)
                    ctx.lineTo(startX + toothWidth * 0.5, startY + toothHeight + 8);
                    ctx.lineTo(startX + 1, startY + toothHeight);
                    // Left cervical line
                    ctx.quadraticCurveTo(startX, startY + toothHeight * 0.65, startX + 2, startY);
                    ctx.closePath();

                    // Tooth color with opacity for depth
                    const toothGradient = ctx.createLinearGradient(startX, startY, startX + toothWidth, startY);
                    toothGradient.addColorStop(0, '#FAF6F1');
                    toothGradient.addColorStop(0.2, '#FFFBF7');
                    toothGradient.addColorStop(0.5, '#FFFDFB');
                    toothGradient.addColorStop(0.8, '#FAF9F7');
                    toothGradient.addColorStop(1, '#F5EDE5');
                    
                    ctx.fillStyle = toothGradient;
                    ctx.fill();

                    // Tooth border - darker
                    ctx.strokeStyle = '#D4C8BD';
                    ctx.lineWidth = 1.5;
                    ctx.stroke();

                    // Incisal edge highlight (cahaya putih di puncak)
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.9)';
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.moveTo(startX + 3, startY + 0.5);
                    ctx.lineTo(startX + toothWidth - 3, startY + 0.5);
                    ctx.stroke();

                    // Facial surface shine
                    const shineGrad = ctx.createRadialGradient(startX + toothWidth * 0.3, startY + toothHeight * 0.3, 0,
                                                                 startX + toothWidth * 0.3, startY + toothHeight * 0.3, toothWidth * 1.5);
                    shineGrad.addColorStop(0, 'rgba(255, 255, 255, 0.4)');
                    shineGrad.addColorStop(1, 'rgba(255, 255, 255, 0)');
                    ctx.fillStyle = shineGrad;
                    ctx.fillRect(startX, startY, toothWidth, toothHeight * 0.6);

                    // Tooth midline (developmental groove)
                    ctx.strokeStyle = 'rgba(200, 180, 170, 0.5)';
                    ctx.lineWidth = 0.8;
                    ctx.beginPath();
                    ctx.moveTo(startX + toothWidth * 0.5, startY + 2);
                    ctx.lineTo(startX + toothWidth * 0.5, startY + toothHeight * 0.7);
                    ctx.stroke();
                }

                // Gum line / CEJ (Cemento-Enamel Junction)
                ctx.strokeStyle = '#E75480';
                ctx.lineWidth = 2.5;
                ctx.beginPath();
                ctx.moveTo(x + 1, y + 32);
                for (let i = 0; i < 9; i++) {
                    const gumX = x + (i * 23) + 0;
                    const gumY = y + 32 + Math.sin(i * 0.8) * 1;
                    if (i === 0) ctx.moveTo(gumX, gumY);
                    else ctx.lineTo(gumX, gumY);
                }
                ctx.stroke();

                // Gum / Gingiva area
                ctx.fillStyle = '#F25280';
                ctx.beginPath();
                ctx.moveTo(x + 1, y + 32);
                for (let i = 0; i < 9; i++) {
                    const gumX = x + (i * 23);
                    const gumY = y + 32 + Math.sin(i * 0.8) * 1;
                    ctx.lineTo(gumX, gumY);
                }
                ctx.lineTo(x + 190, y + 44);
                ctx.lineTo(x, y + 44);
                ctx.closePath();
                ctx.fill();

                // Gum texture/shading
                ctx.fillStyle = 'rgba(200, 0, 100, 0.2)';
                ctx.beginPath();
                ctx.moveTo(x, y + 32);
                ctx.quadraticCurveTo(x + 95, y + 35, x + 190, y + 32);
                ctx.lineTo(x + 190, y + 34);
                ctx.quadraticCurveTo(x + 95, y + 31, x, y + 34);
                ctx.closePath();
                ctx.fill();
            }

            function draw3DBrush(x, y, angle, progress) {
                ctx.save();
                ctx.translate(x, y);
                ctx.rotate(angle);
                ctx.shadowColor = 'rgba(0,0,0,0.4)';
                ctx.shadowBlur = 10;
                ctx.shadowOffsetY = 3;

                // Kepala sikat dengan 3D effect
                const gradient = ctx.createLinearGradient(-10, 0, 10, 0);
                gradient.addColorStop(0, '#CC4444');
                gradient.addColorStop(0.5, '#FF6B6B');
                gradient.addColorStop(1, '#CC4444');
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.moveTo(-10, 0);
                ctx.lineTo(10, 0);
                ctx.lineTo(12, 20);
                ctx.lineTo(-12, 20);
                ctx.closePath();
                ctx.fill();
                
                ctx.strokeStyle = '#8B0000';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Bulu sikat dengan 3D effect
                for (let i = 0; i < 20; i++) {
                    const offsetX = -9 + i * 1;
                    const bristleHeight = 15 + Math.sin(progress * Math.PI * 4 + i * 0.3) * 4;
                    const bristleOffsetY = Math.cos(progress * Math.PI * 3 + i) * 2;
                    
                    // Side bristles (darker)
                    if (i < 4 || i > 16) {
                        ctx.strokeStyle = 'rgba(255, 200, 0, 0.6)';
                        ctx.lineWidth = 1;
                    } else {
                        // Front bristles (brighter)
                        ctx.strokeStyle = '#FFD700';
                        ctx.lineWidth = 1.5;
                    }
                    
                    ctx.beginPath();
                    ctx.moveTo(offsetX, 20);
                    ctx.lineTo(offsetX, 20 + bristleHeight);
                    ctx.stroke();
                }

                // Gagang sikat 3D
                const handleGradient = ctx.createLinearGradient(-4, 30, 4, 30);
                handleGradient.addColorStop(0, '#0088AA');
                handleGradient.addColorStop(0.5, '#00BCD4');
                handleGradient.addColorStop(1, '#0088AA');
                
                ctx.fillStyle = handleGradient;
                ctx.fillRect(-4, 30, 8, 25);
                
                // Handle highlight
                ctx.fillStyle = 'rgba(255,255,255,0.3)';
                ctx.fillRect(-3, 31, 2, 23);

                ctx.restore();
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                animationProgress = (animationProgress + 0.015) % 1;

                // Gradient background
                const bgGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                bgGradient.addColorStop(0, '#E0F7FA');
                bgGradient.addColorStop(1, '#B2EBF2');
                ctx.fillStyle = bgGradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Draw teeth (back layer)
                draw3DTeeth(15, 80);

                // Brush movement dengan 3D rotation
                const brushX = 120 + Math.sin(animationProgress * Math.PI * 4) * 45;
                const brushY = 65 + Math.cos(animationProgress * Math.PI * 2) * 10;
                const angle = Math.sin(animationProgress * Math.PI * 3) * 0.5 + 
                              Math.cos(animationProgress * Math.PI * 2) * 0.3;

                draw3DBrush(brushX, brushY, angle, animationProgress);

                // Draw particles dengan depth
                particles.forEach((p, i) => {
                    p.x += p.vx;
                    p.y += p.vy;
                    p.z += p.vz;
                    p.life -= 0.015;

                    const proj = project3D(p.x, p.y, p.z);
                    const alpha = p.life * 0.8;
                    
                    // Bubble effect
                    ctx.fillStyle = `rgba(100, 220, 255, ${alpha * 0.6})`;
                    ctx.beginPath();
                    ctx.arc(120 + proj.x, 100 + proj.y, p.size * proj.scale, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Bubble shine
                    ctx.strokeStyle = `rgba(255, 255, 255, ${alpha * 0.4})`;
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.arc(120 + proj.x - 1, 100 + proj.y - 1, p.size * proj.scale * 0.4, 0, Math.PI * 2);
                    ctx.stroke();

                    if (p.life <= 0) {
                        particles.splice(i, 1);
                    }
                });

                // Create particles
                if (Math.sin(animationProgress * Math.PI * 2) > 0 && Math.random() > 0.65) {
                    createParticle(brushX - 120, brushY - 100, 0);
                }

                // Text dengan shadow
                ctx.shadowColor = 'rgba(0,0,0,0.2)';
                ctx.shadowBlur = 4;
                ctx.fillStyle = '#00695C';
                ctx.font = 'bold 16px Poppins';
                ctx.fillText('üíß Busa terbentuk dengan gerakan melingkar', 15, canvas.height - 10);

                sikatAnimationId = requestAnimationFrame(animate);
            }

            animate();
        }

        function startFlossAnimation() {
            const canvas = document.getElementById('canvasFloss');
            const ctx = canvas.getContext('2d');
            let animationProgress = 0;
            let debris = [];

            function createDebris(x, y) {
                debris.push({
                    x: x,
                    y: y,
                    z: Math.random() * 30 - 15,
                    vx: (Math.random() - 0.5) * 3,
                    vy: Math.random() * -3 - 1,
                    vz: (Math.random() - 0.5) * 0.5,
                    life: 1,
                    size: Math.random() * 1.5 + 0.5,
                    rotation: Math.random() * Math.PI * 2,
                    rotVel: (Math.random() - 0.5) * 0.2
                });
            }

            function project3D(x, y, z) {
                const perspective = 250;
                const scale = perspective / (perspective + z);
                return { x: x * scale, y: y * scale, scale };
            }

            function draw3DTeeth() {
                ctx.shadowColor = 'rgba(0,0,0,0.2)';
                ctx.shadowBlur = 6;

                // Draw 2 large teeth untuk flossing demo
                const teeth = [
                    { x: 80, y: 50, label: 'Incisor' },
                    { x: 170, y: 50, label: 'Incisor' },
                ];

                teeth.forEach((tooth, idx) => {
                    const toothWidth = 35;
                    const toothHeight = 80;

                    // Main tooth shape
                    ctx.beginPath();
                    // Top edge (incisal)
                    ctx.moveTo(tooth.x + 4, tooth.y);
                    ctx.lineTo(tooth.x + toothWidth - 4, tooth.y);
                    // Right side
                    ctx.quadraticCurveTo(tooth.x + toothWidth + 2, tooth.y + toothHeight * 0.6, 
                                        tooth.x + toothWidth - 2, tooth.y + toothHeight);
                    // Root point
                    ctx.lineTo(tooth.x + toothWidth * 0.5, tooth.y + toothHeight + 12);
                    // Left side
                    ctx.lineTo(tooth.x + 2, tooth.y + toothHeight);
                    ctx.quadraticCurveTo(tooth.x - 2, tooth.y + toothHeight * 0.6, 
                                        tooth.x + 4, tooth.y);
                    ctx.closePath();

                    // Tooth gradient
                    const toothGrad = ctx.createLinearGradient(tooth.x, tooth.y, tooth.x + toothWidth, tooth.y);
                    toothGrad.addColorStop(0, '#FAF6F1');
                    toothGrad.addColorStop(0.3, '#FFFBF7');
                    toothGrad.addColorStop(0.7, '#FFFDFB');
                    toothGrad.addColorStop(1, '#F5EDE5');
                    
                    ctx.fillStyle = toothGrad;
                    ctx.fill();

                    // Border
                    ctx.strokeStyle = '#D4C8BD';
                    ctx.lineWidth = 2;
                    ctx.stroke();

                    // Incisal edge highlight
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.9)';
                    ctx.lineWidth = 1.5;
                    ctx.beginPath();
                    ctx.moveTo(tooth.x + 5, tooth.y + 1);
                    ctx.lineTo(tooth.x + toothWidth - 5, tooth.y + 1);
                    ctx.stroke();

                    // Facial surface shine
                    const radialShine = ctx.createRadialGradient(tooth.x + toothWidth * 0.35, tooth.y + toothHeight * 0.25, 0,
                                                                   tooth.x + toothWidth * 0.35, tooth.y + toothHeight * 0.25, toothWidth * 2);
                    radialShine.addColorStop(0, 'rgba(255, 255, 255, 0.5)');
                    radialShine.addColorStop(1, 'rgba(255, 255, 255, 0)');
                    ctx.fillStyle = radialShine;
                    ctx.fillRect(tooth.x, tooth.y, toothWidth, toothHeight * 0.65);

                    // Midline groove
                    ctx.strokeStyle = 'rgba(200, 180, 170, 0.6)';
                    ctx.lineWidth = 1.2;
                    ctx.beginPath();
                    ctx.moveTo(tooth.x + toothWidth * 0.5, tooth.y + 3);
                    ctx.lineTo(tooth.x + toothWidth * 0.5, tooth.y + toothHeight * 0.75);
                    ctx.stroke();

                    // Contact area shadow (between teeth)
                    if (idx === 0) {
                        ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
                        ctx.beginPath();
                        ctx.arc(tooth.x + toothWidth + 8, tooth.y + toothHeight * 0.4, 4, 0, Math.PI * 2);
                        ctx.fill();
                    }
                });

                // Gum line
                ctx.strokeStyle = '#E75480';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(60, 130);
                ctx.quadraticCurveTo(150, 135, 240, 130);
                ctx.stroke();

                // Gum area
                ctx.fillStyle = '#F25280';
                ctx.beginPath();
                ctx.moveTo(60, 130);
                ctx.quadraticCurveTo(150, 135, 240, 130);
                ctx.lineTo(240, 150);
                ctx.lineTo(60, 150);
                ctx.closePath();
                ctx.fill();

                // Gum shading
                ctx.fillStyle = 'rgba(200, 0, 100, 0.25)';
                ctx.beginPath();
                ctx.moveTo(60, 130);
                ctx.quadraticCurveTo(150, 133, 240, 130);
                ctx.lineTo(240, 135);
                ctx.quadraticCurveTo(150, 130, 60, 135);
                ctx.closePath();
                ctx.fill();
            }

            function draw3DFloss(progress) {
                const gapX = 140;
                const topY = 35;
                const bottomY = 165;
                const verticalMove = Math.sin(progress * Math.PI * 2) * 25;

                // Benang dengan gradient & shadow
                ctx.shadowColor = 'rgba(0,0,0,0.3)';
                ctx.shadowBlur = 6;
                
                const flossGradient = ctx.createLinearGradient(gapX - 2, topY, gapX + 2, bottomY);
                flossGradient.addColorStop(0, '#B3E5FC');
                flossGradient.addColorStop(0.3, '#FFFFFF');
                flossGradient.addColorStop(0.7, '#FFFFFF');
                flossGradient.addColorStop(1, '#B3E5FC');

                ctx.strokeStyle = flossGradient;
                ctx.lineWidth = 4;
                ctx.lineCap = 'round';

                // Upper segment
                ctx.beginPath();
                ctx.moveTo(gapX, topY);
                ctx.bezierCurveTo(gapX - 8, topY + 20, gapX - 12, 70, gapX, 80 + verticalMove);
                ctx.stroke();

                // Lower segment
                ctx.beginPath();
                ctx.moveTo(gapX, 140 + verticalMove);
                ctx.bezierCurveTo(gapX - 12, 160, gapX - 8, bottomY - 20, gapX, bottomY);
                ctx.stroke();

                // Floss highlight (cahaya)
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.7)';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(gapX - 1, topY + 15);
                ctx.lineTo(gapX - 1, bottomY - 15);
                ctx.stroke();

                // Glow effect
                ctx.strokeStyle = 'rgba(0, 188, 212, 0.2)';
                ctx.lineWidth = 10;
                ctx.beginPath();
                ctx.moveTo(gapX, topY);
                ctx.lineTo(gapX, bottomY);
                ctx.stroke();
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                animationProgress = (animationProgress + 0.018) % 1;

                // Gradient background
                const bgGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                bgGradient.addColorStop(0, '#E0F7FA');
                bgGradient.addColorStop(1, '#B2EBF2');
                ctx.fillStyle = bgGradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                draw3DTeeth();
                draw3DFloss(animationProgress);

                // Draw debris dengan depth
                debris.forEach((p, i) => {
                    p.x += p.vx;
                    p.y += p.vy;
                    p.z += p.vz;
                    p.life -= 0.012;
                    p.rotation += p.rotVel;

                    const proj = project3D(p.x, p.y, p.z);
                    const alpha = p.life * 0.7;

                    ctx.save();
                    ctx.translate(140 + proj.x, 100 + proj.y);
                    ctx.rotate(p.rotation);
                    
                    ctx.fillStyle = `rgba(255, 152, 0, ${alpha})`;
                    ctx.fillRect(-p.size * proj.scale, -p.size * proj.scale, 
                                 p.size * proj.scale * 2, p.size * proj.scale * 2);
                    
                    // Debris shine
                    ctx.fillStyle = `rgba(255, 220, 100, ${alpha * 0.5})`;
                    ctx.fillRect(-p.size * proj.scale * 0.3, -p.size * proj.scale * 0.3,
                                 p.size * proj.scale, p.size * proj.scale);
                    
                    ctx.restore();

                    if (p.life <= 0) {
                        debris.splice(i, 1);
                    }
                });

                // Create debris
                if (Math.sin(animationProgress * Math.PI * 2) > 0.3 && Math.random() > 0.75) {
                    createDebris(0, 0);
                }

                // Text dengan shadow
                ctx.shadowColor = 'rgba(0,0,0,0.2)';
                ctx.shadowBlur = 4;
                ctx.fillStyle = '#00695C';
                ctx.font = 'bold 16px Poppins';
                ctx.fillText('‚ú® Kotoran terangkat dengan gerakan naik-turun', 15, canvas.height - 10);

                requestAnimationFrame(animate);
            }

            animate();
        }

        // Create Bubbles
        function createBubbles() {
            const bubbleContainer = document.getElementById('bubbles');
            for (let i = 0; i < 20; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                const x = Math.random() * 100;
                bubble.style.setProperty('--x', x + '%');
                bubble.style.animation = `float ${5 + Math.random() * 4}s infinite`;
                bubble.style.animationDelay = Math.random() * 2 + 's';
                bubbleContainer.appendChild(bubble);
            }
        }

        // Initialize
        window.addEventListener('load', () => {
            createBubbles();
            updateSikatStep();
            updateFlossStep();
        });
    </script>
</body>
</html>
