<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Tracker</title>
    <style>
        body {
            font-family: Arial;
            background: #0f0f1e;
            color: #e0e0e0;
            padding: 20px;
        }
        .container {
            max-width: 500px;
            margin: 0 auto;
        }
        h1 { color: #2a9d8f; text-align: center; }
        .date-input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #2a9d8f; background: #1a1a2e; color: #e0e0e0; }
        button { background: #2a9d8f; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; margin: 5px; }
        button:hover { background: #1d7a78; }
        .form { background: #1a1a2e; padding: 20px; border: 1px solid #2a9d8f; border-radius: 8px; margin: 20px 0; }
        input, select, textarea { width: 100%; padding: 8px; margin: 10px 0; border: 1px solid #2a9d8f; background: #0f0f1e; color: #e0e0e0; font-family: inherit; }
        .total { text-align: center; font-size: 2em; color: #2a9d8f; margin: 20px 0; }
        .expense { background: #1a1a2e; padding: 10px; margin: 10px 0; border-left: 3px solid #2a9d8f; display: flex; justify-content: space-between; }
        .expense-text { flex: 1; }
        .expense-amount { color: #2a9d8f; font-weight: bold; margin: 0 10px; }
        .btn-del { background: #ff6b6b; padding: 5px 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ’° Expense Tracker</h1>
        
        <div style="text-align: center;">
            <input type="date" id="dateInput">
            <button onclick="loadDate()">Cek</button>
            <button onclick="today()">Hari Ini</button>
        </div>
        
        <div class="total" id="total">Rp 0</div>
        
        <div class="form">
            <select id="cat"><option>Makanan</option><option>Transport</option><option>Belanja</option><option>Lainnya</option></select>
            <input type="number" id="amt" placeholder="Jumlah (Rp)">
            <textarea id="desc" placeholder="Deskripsi"></textarea>
            <button onclick="add()" style="width: 100%;">+ Tambah</button>
        </div>
        
        <div id="list"></div>
    </div>

    <script>
        let data = {};
        let currDate = new Date().toDateString();

        function getKey() { return 'exp_' + currDate; }

        function save() { localStorage.setItem(getKey(), JSON.stringify(data[currDate] || [])); }
        function load() { data[currDate] = JSON.parse(localStorage.getItem(getKey()) || '[]'); }

        function add() {
            let cat = document.getElementById('cat').value;
            let amt = parseInt(document.getElementById('amt').value) || 0;
            let desc = document.getElementById('desc').value || 'No desc';
            
            if (amt <= 0) { alert('Enter amount'); return; }
            
            load();
            data[currDate].push({ cat, amt, desc, id: Date.now() });
            save();
            
            document.getElementById('amt').value = '';
            document.getElementById('desc').value = '';
            render();
        }

        function del(id) {
            load();
            data[currDate] = data[currDate].filter(x => x.id !== id);
            save();
            render();
        }

        function render() {
            load();
            let total = data[currDate].reduce((s, x) => s + x.amt, 0);
            document.getElementById('total').innerHTML = 'Rp ' + total.toLocaleString();
            
            let html = '';data[currDate].forEach(x => {
                html += '<div class="expense"><div class="expense-text"><strong>' + x.cat + '</strong> - ' + x.desc + '</div><div class="expense-amount">Rp ' + x.amt.toLocaleString() + '</div><button class="btn-del" onclick="del(' + x.id + ')">Hapus</button></div>';
            });
            document.getElementById('list').innerHTML = html || '<p style="text-align:center; color:#707070;">No expenses</p>';
        }

        function loadDate() {
            let d = document.getElementById('dateInput').value;
            if(!d) { alert('Select date'); return; }
            currDate = new Date(d).toDateString();
            render();
        }

        function today() {
            currDate = new Date().toDateString();
            let y = new Date().getFullYear();
            let m = String(new Date().getMonth() + 1).padStart(2, '0');
            let d = String(new Date().getDate()).padStart(2, '0');
            document.getElementById('dateInput').value = y + '-' + m + '-' + d;
            render();
        }

        today();
    </script>
</body>
</html>
